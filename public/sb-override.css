/* Ultra-Resilient StartButton SDK styling - Broad Spectrum */

/* 1. Center and constrain any element that looks like a modal, dialog, or overlay containing an SDK */
.cdk-overlay-pane,
[role="dialog"],
[aria-modal="true"],
[class*="overlay-pane" i],
[class*="mat-"][class*="dialog"],
.cdk-global-overlay-wrapper {
  width: min(560px, 94vw) !important;
  max-width: 94vw !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  margin: 0 auto !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  height: auto !important;
  max-height: 94vh !important;
  position: fixed !important;
  pointer-events: auto !important;
  z-index: 2147483640 !important;
}

/* 2. SDK Host & Iframe Fit - Ensure they fill the resilient container */
sb-init, 
iframe[src*="startbutton"], 
iframe[src*="sb-web-sdk"],
iframe[src*="startbutton.tech"],
[class*="sb-container" i] {
  display: block !important;
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  overflow: visible !important;
}

/* 3. Aggressive Logo & Image Constraints - Detect oversized images in modal contexts */
[role="dialog"] img,
[role="dialog"] svg,
[aria-modal="true"] img,
[aria-modal="true"] svg,
sb-init img, 
sb-init svg,
[class*="sb-"] img,
[class*="sb-"] svg,
[id*="logo" i] img,
[class*="logo" i] img,
[id*="logo" i] svg,
[class*="logo" i] svg,
.cdk-overlay-pane img,
.cdk-overlay-pane svg {
  max-width: 60px !important;
  max-height: 60px !important;
  width: auto !important;
  height: auto !important;
  object-fit: contain !important;
  display: block !important;
  margin: 0 auto 0.5rem auto !important;
}

/* 4. Container Constraints - Prevent internal expansion of the modal */
sb-init [class*="header" i],
sb-init [class*="logo" i],
sb-init [class*="container" i],
[role="dialog"] header,
[role="dialog"] [class*="logo" i],
[role="dialog"] [class*="header" i] {
  max-width: 100% !important;
  height: auto !important;
  min-height: 0 !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  padding: 0 !important;
  margin: 0 auto !important;
}

/* 5. Pointer Events & Z-Index - Fix for dropdowns/selects */
.cdk-overlay-container, .cdk-global-overlay-wrapper {
  pointer-events: auto !important;
}
.cdk-overlay-pane {
  pointer-events: auto !important;
}
[class*="select-panel" i],
[class*="dropdown" i],
.cdk-overlay-pane:has([class*="select-panel" i]),
.cdk-overlay-pane:has([class*="dropdown" i]) {
  z-index: 2147483647 !important;
  pointer-events: auto !important;
}

/* 6. Mobile Full-Screen Fallback */
@media (max-width: 640px), (pointer: coarse) {
  .cdk-overlay-pane, [role="dialog"], [aria-modal="true"] {
    position: fixed !important;
    inset: 0 !important;
    width: 100vw !important;
    height: 100dvh !important;
    max-width: 100vw !important;
    max-height: 100dvh !important;
    left: 0 !important;
    top: 0 !important;
    transform: none !important;
    margin: 0 !important;
  }
}

/* 7. Document Overflow Control - Prevent horizontal scroll when modal is active */
html:has(sb-init), body:has(sb-init), 
html:has(iframe[src*="startbutton"]), body:has(iframe[src*="startbutton"]),
html:has([role="dialog"]), body:has([role="dialog"]),
html:has([aria-modal="true"]), body:has([aria-modal="true"]) {
  overflow-x: hidden !important;
}
